{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { CheckboxMe } from \"./CheckBox\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction ChapitreSelection(_ref) {\n  var pk = _ref.pk,\n    bible = _ref.bible,\n    livre = _ref.livre,\n    chapitre = _ref.chapitre,\n    setChapitre = _ref.setChapitre;\n  if (livre === 'null' || bible === 'null') {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n  var chapters = pk.gqlQuerySync(\"{\\n    docSet(id: \\\"\" + bible + \"\\\") {\\n      document(bookCode: \\\"\" + livre + \"\\\") {\\n        cvIndexes {\\n          chapter\\n        }\\n      }\\n    }\\n  }\");\n  var initialState = useMemo(function () {\n    return Array(chapters.data.docSet.document.cvIndexes.length).fill(false).map(function () {\n      return useState(false);\n    });\n  }, [chapters]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item;\n    return item;\n  }, []);\n  var keyExtractor = useCallback(function (item, index) {\n    return \"chap-\" + index;\n  }, []);\n  useEffect(function () {\n    var newAC = initialState.reduce(function (acc, _ref3, index) {\n      var _ref4 = _slicedToArray(_ref3, 2),\n        state = _ref4[0],\n        _ = _ref4[1];\n      if (state) {\n        acc.push(\"\" + index);\n      }\n      return acc;\n    }, []);\n    setChapitre(newAC);\n  }, [initialState, setChapitre]);\n  if (chapters.data.docSet.document != null) {\n    var data = chapters.data.docSet.document.cvIndexes.map(function (doc, id) {\n      return _jsx(CheckboxMe, {\n        num: doc.chapter,\n        checked: initialState[id][0],\n        setChecked: initialState[id][1]\n      }, id);\n    });\n    return _jsx(FlatList, {\n      data: data,\n      numColumns: 3,\n      keyExtractor: keyExtractor,\n      renderItem: renderItem\n    });\n  } else {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n}\nexport { ChapitreSelection };","map":{"version":3,"names":["Text","useCallback","useEffect","useMemo","useState","View","FlatList","CheckboxMe","jsx","_jsx","ChapitreSelection","_ref","pk","bible","livre","chapitre","setChapitre","children","chapters","gqlQuerySync","initialState","Array","data","docSet","document","cvIndexes","length","fill","map","renderItem","_ref2","item","keyExtractor","index","newAC","reduce","acc","_ref3","_ref4","_slicedToArray","state","_","push","doc","id","num","chapter","checked","setChecked","numColumns"],"sources":["/home/gabriel/repos/jxt-korennumi/components/proofOfConcept/ChapitreSelection.js"],"sourcesContent":["import { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { View, FlatList } from 'react-native';\nimport { CheckboxMe } from './CheckBox';\n\nfunction ChapitreSelection({ pk, bible, livre, chapitre, setChapitre }) {\n  if (livre === 'null' || bible === 'null') {\n    return <Text>{`Can't display`}</Text>;\n  }\n\n  let chapters = pk.gqlQuerySync(`{\n    docSet(id: \"${bible}\") {\n      document(bookCode: \"${livre}\") {\n        cvIndexes {\n          chapter\n        }\n      }\n    }\n  }`);\n\n  const initialState = useMemo(() => {\n    return Array(chapters.data.docSet.document.cvIndexes.length)\n      .fill(false)\n      .map(() => useState(false));\n  }, [chapters]);\n\n  const renderItem = useCallback(({ item }) => item, []);\n  const keyExtractor = useCallback((item, index) => `chap-${index}`, []);\n\n  useEffect(() => {\n    let newAC = initialState.reduce((acc, [state, _], index) => {\n      if (state) {\n        acc.push(`${index}`);\n      }\n      return acc;\n    }, []);\n    setChapitre(newAC);\n  }, [initialState, setChapitre]);\n\n  if (chapters.data.docSet.document != null) {\n    const data = chapters.data.docSet.document.cvIndexes.map((doc, id) => (\n      <CheckboxMe\n        key={id}\n        num={doc.chapter}\n        checked={initialState[id][0]}\n        setChecked={initialState[id][1]}\n      />\n    ));\n\n    return (\n      <FlatList\n        data={data}\n        numColumns={3}\n        keyExtractor={keyExtractor}\n        renderItem={renderItem}\n      />\n    );\n  } else {\n    return <Text>{`Can't display`}</Text>;\n  }\n}\n\nexport { ChapitreSelection };\n"],"mappings":";AAAA,SAASA,IAAI,QAAQ,oBAAoB;AACzC,SAASC,WAAW,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,QAAA;AAElE,SAASC,UAAU;AAAqB,SAAAC,GAAA,IAAAC,IAAA;AAExC,SAASC,iBAAiBA,CAAAC,IAAA,EAA8C;EAAA,IAA3CC,EAAE,GAAAD,IAAA,CAAFC,EAAE;IAAEC,KAAK,GAAAF,IAAA,CAALE,KAAK;IAAEC,KAAK,GAAAH,IAAA,CAALG,KAAK;IAAEC,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;IAAEC,WAAW,GAAAL,IAAA,CAAXK,WAAW;EAClE,IAAIF,KAAK,KAAK,MAAM,IAAID,KAAK,KAAK,MAAM,EAAE;IACxC,OAAOJ,IAAA,CAACT,IAAI;MAAAiB,QAAA;IAAA,EAAyB;EACvC;EAEA,IAAIC,QAAQ,GAAGN,EAAE,CAACO,YAAY,0BACdN,KAAK,0CACKC,KAAK,mFAM5B;EAEH,IAAMM,YAAY,GAAGjB,OAAO,CAAC,YAAM;IACjC,OAAOkB,KAAK,CAACH,QAAQ,CAACI,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,SAAS,CAACC,MAAM,CAAC,CACzDC,IAAI,CAAC,KAAK,CAAC,CACXC,GAAG,CAAC;MAAA,OAAMxB,QAAQ,CAAC,KAAK,CAAC;IAAA,EAAC;EAC/B,CAAC,EAAE,CAACc,QAAQ,CAAC,CAAC;EAEd,IAAMW,UAAU,GAAG5B,WAAW,CAAC,UAAA6B,KAAA;IAAA,IAAGC,IAAI,GAAAD,KAAA,CAAJC,IAAI;IAAA,OAAOA,IAAI;EAAA,GAAE,EAAE,CAAC;EACtD,IAAMC,YAAY,GAAG/B,WAAW,CAAC,UAAC8B,IAAI,EAAEE,KAAK;IAAA,iBAAaA,KAAK;EAAA,CAAE,EAAE,EAAE,CAAC;EAEtE/B,SAAS,CAAC,YAAM;IACd,IAAIgC,KAAK,GAAGd,YAAY,CAACe,MAAM,CAAC,UAACC,GAAG,EAAAC,KAAA,EAAcJ,KAAK,EAAK;MAAA,IAAAK,KAAA,GAAAC,cAAA,CAAAF,KAAA;QAArBG,KAAK,GAAAF,KAAA;QAAEG,CAAC,GAAAH,KAAA;MAC7C,IAAIE,KAAK,EAAE;QACTJ,GAAG,CAACM,IAAI,MAAIT,KAAK,CAAG;MACtB;MACA,OAAOG,GAAG;IACZ,CAAC,EAAE,EAAE,CAAC;IACNpB,WAAW,CAACkB,KAAK,CAAC;EACpB,CAAC,EAAE,CAACd,YAAY,EAAEJ,WAAW,CAAC,CAAC;EAE/B,IAAIE,QAAQ,CAACI,IAAI,CAACC,MAAM,CAACC,QAAQ,IAAI,IAAI,EAAE;IACzC,IAAMF,IAAI,GAAGJ,QAAQ,CAACI,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,SAAS,CAACG,GAAG,CAAC,UAACe,GAAG,EAAEC,EAAE;MAAA,OAC/DnC,IAAA,CAACF,UAAU;QAETsC,GAAG,EAAEF,GAAG,CAACG,OAAQ;QACjBC,OAAO,EAAE3B,YAAY,CAACwB,EAAE,CAAC,CAAC,CAAC,CAAE;QAC7BI,UAAU,EAAE5B,YAAY,CAACwB,EAAE,CAAC,CAAC,CAAC;MAAE,GAH3BA,EAAE,CAIP;IAAA,CACH,CAAC;IAEF,OACEnC,IAAA,CAACH,QAAQ;MACPgB,IAAI,EAAEA,IAAK;MACX2B,UAAU,EAAE,CAAE;MACdjB,YAAY,EAAEA,YAAa;MAC3BH,UAAU,EAAEA;IAAW,EACvB;EAEN,CAAC,MAAM;IACL,OAAOpB,IAAA,CAACT,IAAI;MAAAiB,QAAA;IAAA,EAAyB;EACvC;AACF;AAEA,SAASP,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}