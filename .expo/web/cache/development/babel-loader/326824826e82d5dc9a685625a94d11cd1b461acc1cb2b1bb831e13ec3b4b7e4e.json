{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { CheckboxMe } from \"./CheckBox\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction ChapitreSelection(_ref) {\n  var pk = _ref.pk,\n    bible = _ref.bible,\n    livre = _ref.livre,\n    chapitre = _ref.chapitre,\n    setChapitre = _ref.setChapitre;\n  if (livre === 'null' || bible == 'null') {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n  var chapters = pk.gqlQuerySync(\"{\\n        docSet(id: \\\"\" + bible + \"\\\") {\\n          document(bookCode: \\\"\" + livre + \"\\\") {\\n            cvIndexes {\\n              chapter\\n            }\\n          }\\n        }\\n      }\");\n  var _useState = useState(chapters.data.docSet.document.cvIndexes.reduce(function (acc, cur, index) {\n      acc[index] = false;\n      return acc;\n    }, {})),\n    _useState2 = _slicedToArray(_useState, 2),\n    boolChapter = _useState2[0],\n    setBoolChapter = _useState2[1];\n  useEffect(function () {\n    console.log('useEffect');\n    var newChapter = [];\n    for (var key in boolChapter) {\n      if (boolChapter[key]) newChapter.push(key);\n    }\n    console.log('makeChapter');\n  }, [boolChapter]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item,\n      index = _ref2.index;\n    return _jsx(CheckboxMe, {\n      num: item.chapter,\n      isChecked: boolChapter[index],\n      setChecked: function setChecked(value) {\n        setBoolChapter(function (prev) {\n          return _objectSpread(_objectSpread({}, prev), {}, _defineProperty({}, index, value));\n        });\n      }\n    });\n  }, [boolChapter]);\n  var keyExtractor = useCallback(function (item, index) {\n    return \"chap-\" + index;\n  }, []);\n  if (chapters.data.docSet.document != null) {\n    return _jsx(FlatList, {\n      data: chapters.data.docSet.document.cvIndexes,\n      numColumns: 3,\n      keyExtractor: keyExtractor,\n      renderItem: renderItem\n    });\n  } else {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n}\nexport { ChapitreSelection };","map":{"version":3,"names":["Text","useCallback","useEffect","useState","View","FlatList","CheckboxMe","jsx","_jsx","ChapitreSelection","_ref","pk","bible","livre","chapitre","setChapitre","children","chapters","gqlQuerySync","_useState","data","docSet","document","cvIndexes","reduce","acc","cur","index","_useState2","_slicedToArray","boolChapter","setBoolChapter","console","log","newChapter","key","push","renderItem","_ref2","item","num","chapter","isChecked","setChecked","value","prev","_objectSpread","_defineProperty","keyExtractor","numColumns"],"sources":["/home/gabriel/repos/jxt-korennumi/components/proofOfConcept/ChapitreSelection.js"],"sourcesContent":["import { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useState } from 'react';\n\nimport { View, FlatList } from 'react-native';\nimport { CheckboxMe } from './CheckBox';\n\nfunction ChapitreSelection({ pk, bible, livre, chapitre, setChapitre }) {\n\n\n\n  if (livre === 'null' || bible == 'null') {\n    return <Text>{`Can't display`}</Text>\n  }\n  let chapters = pk.gqlQuerySync(\n    `{\n        docSet(id: \"${bible}\") {\n          document(bookCode: \"${livre}\") {\n            cvIndexes {\n              chapter\n            }\n          }\n        }\n      }`);\n\n      const [boolChapter, setBoolChapter] = useState(\n        chapters.data.docSet.document.cvIndexes.reduce((acc, cur, index) => {\n          acc[index] = false;\n          return acc;\n        }, {})\n      );\n\n  useEffect(() => {\n    console.log('useEffect')\n    let newChapter = []\n    for (let key in boolChapter) {\n      if (boolChapter[key])\n        newChapter.push(key)\n    }\n    console.log('makeChapter')\n  }, [boolChapter]);\n\n  const renderItem = useCallback(({ item, index }) => {\n    return (\n      <CheckboxMe\n        num={item.chapter}\n        isChecked={boolChapter[index]}\n        setChecked={(value) => {\n          setBoolChapter((prev) => ({ ...prev, [index]: value }));\n        }}\n      />\n    );\n  }, [boolChapter]);\n\n  const keyExtractor = useCallback((item, index) => `chap-${index}`, []);\n\n\n  if (chapters.data.docSet.document != null) {\n    return (\n      <FlatList\n        data={chapters.data.docSet.document.cvIndexes}\n        numColumns={3}\n        keyExtractor={keyExtractor}\n        renderItem={renderItem} \n      />\n    );\n  } else {\n    return <Text>{`Can't display`}</Text>\n  }\n}\nexport { ChapitreSelection }\n"],"mappings":";;;;AAAA,SAASA,IAAI,QAAQ,oBAAoB;AACzC,SAASC,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,QAAA;AAGzD,SAASC,UAAU;AAAqB,SAAAC,GAAA,IAAAC,IAAA;AAExC,SAASC,iBAAiBA,CAAAC,IAAA,EAA8C;EAAA,IAA3CC,EAAE,GAAAD,IAAA,CAAFC,EAAE;IAAEC,KAAK,GAAAF,IAAA,CAALE,KAAK;IAAEC,KAAK,GAAAH,IAAA,CAALG,KAAK;IAAEC,QAAQ,GAAAJ,IAAA,CAARI,QAAQ;IAAEC,WAAW,GAAAL,IAAA,CAAXK,WAAW;EAIlE,IAAIF,KAAK,KAAK,MAAM,IAAID,KAAK,IAAI,MAAM,EAAE;IACvC,OAAOJ,IAAA,CAACR,IAAI;MAAAgB,QAAA;IAAA,EAAyB;EACvC;EACA,IAAIC,QAAQ,GAAGN,EAAE,CAACO,YAAY,8BAEVN,KAAK,8CACKC,KAAK,2GAM5B;EAEH,IAAAM,SAAA,GAAsChB,QAAQ,CAC5Cc,QAAQ,CAACG,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,SAAS,CAACC,MAAM,CAAC,UAACC,GAAG,EAAEC,GAAG,EAAEC,KAAK,EAAK;MAClEF,GAAG,CAACE,KAAK,CAAC,GAAG,KAAK;MAClB,OAAOF,GAAG;IACZ,CAAC,EAAE,CAAC,CAAC,CAAC,CACP;IAAAG,UAAA,GAAAC,cAAA,CAAAV,SAAA;IALMW,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAOtC1B,SAAS,CAAC,YAAM;IACd8B,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IACxB,IAAIC,UAAU,GAAG,EAAE;IACnB,KAAK,IAAIC,GAAG,IAAIL,WAAW,EAAE;MAC3B,IAAIA,WAAW,CAACK,GAAG,CAAC,EAClBD,UAAU,CAACE,IAAI,CAACD,GAAG,CAAC;IACxB;IACAH,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;EAC5B,CAAC,EAAE,CAACH,WAAW,CAAC,CAAC;EAEjB,IAAMO,UAAU,GAAGpC,WAAW,CAAC,UAAAqC,KAAA,EAAqB;IAAA,IAAlBC,IAAI,GAAAD,KAAA,CAAJC,IAAI;MAAEZ,KAAK,GAAAW,KAAA,CAALX,KAAK;IAC3C,OACEnB,IAAA,CAACF,UAAU;MACTkC,GAAG,EAAED,IAAI,CAACE,OAAQ;MAClBC,SAAS,EAAEZ,WAAW,CAACH,KAAK,CAAE;MAC9BgB,UAAU,EAAE,SAAAA,WAACC,KAAK,EAAK;QACrBb,cAAc,CAAC,UAACc,IAAI;UAAA,OAAAC,aAAA,CAAAA,aAAA,KAAWD,IAAI,OAAAE,eAAA,KAAGpB,KAAK,EAAGiB,KAAK;QAAA,CAAG,CAAC;MACzD;IAAE,EACF;EAEN,CAAC,EAAE,CAACd,WAAW,CAAC,CAAC;EAEjB,IAAMkB,YAAY,GAAG/C,WAAW,CAAC,UAACsC,IAAI,EAAEZ,KAAK;IAAA,iBAAaA,KAAK;EAAA,CAAE,EAAE,EAAE,CAAC;EAGtE,IAAIV,QAAQ,CAACG,IAAI,CAACC,MAAM,CAACC,QAAQ,IAAI,IAAI,EAAE;IACzC,OACEd,IAAA,CAACH,QAAQ;MACPe,IAAI,EAAEH,QAAQ,CAACG,IAAI,CAACC,MAAM,CAACC,QAAQ,CAACC,SAAU;MAC9C0B,UAAU,EAAE,CAAE;MACdD,YAAY,EAAEA,YAAa;MAC3BX,UAAU,EAAEA;IAAW,EACvB;EAEN,CAAC,MAAM;IACL,OAAO7B,IAAA,CAACR,IAAI;MAAAgB,QAAA;IAAA,EAAyB;EACvC;AACF;AACA,SAASP,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}