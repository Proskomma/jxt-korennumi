{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar defaultSettings = {\n  showWordAtts: false,\n  showTitles: true,\n  showHeadings: true,\n  showFootnotes: true,\n  showXrefs: true,\n  showChapterLabels: true,\n  showVersesLabels: true,\n  showCharacterMarkup: true,\n  showParaStyles: true,\n  selectedBcvNotes: []\n};\nvar sofria2WebActions = {\n  startDocument: [{\n    description: \"Set up\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref) {\n      var config = _ref.config,\n        context = _ref.context,\n        workspace = _ref.workspace,\n        output = _ref.output;\n      if (config.displayPartOfText != null) {\n        if (!['begin', 'continue'].includes(config.displayPartOfText.state)) {\n          throw new Error('state must be typeof string and one of begin or continue');\n        }\n      }\n      workspace.settings = _objectSpread(_objectSpread({}, defaultSettings), config);\n      workspace.webParas = [];\n      output.sofria = {};\n      output.sofria.sequence = {};\n      workspace.currentSequence = output.sofria.sequence;\n      workspace.paraContentStack = [];\n      workspace.footnoteNo = 1;\n      workspace.bookCode = context.document.metadata.document.bookCode;\n      workspace.chapter = 0;\n    }\n  }],\n  startRow: [{\n    description: \"Initialise content stack\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref2) {\n      var context = _ref2.context,\n        workspace = _ref2.workspace;\n      var block = context.sequences[0].block;\n      if (!context.inTable) {\n        context.inTable = true;\n        workspace.paraContentStack = [{\n          subType: 'table',\n          content: []\n        }];\n      }\n      workspace.paraContentStack.unshift({\n        subType: block.subType,\n        content: []\n      });\n    }\n  }],\n  endRow: [{\n    description: \"Add completed table to webParas\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref3) {\n      var config = _ref3.config,\n        context = _ref3.context,\n        workspace = _ref3.workspace;\n      var popped = workspace.paraContentStack.shift();\n      workspace.paraContentStack[0].content.push(config.renderers.row(popped.content));\n    }\n  }],\n  startSequence: [{\n    description: \"identity\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref4) {\n      var context = _ref4.context,\n        workspace = _ref4.workspace;\n      if (context.inTable) {\n        context.inTable = false;\n      }\n      workspace.currentSequence.type = context.sequences[0].type;\n      workspace.currentSequence.blocks = [];\n    }\n  }],\n  endSequence: [{\n    description: \"identity\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref5) {\n      var workspace = _ref5.workspace;\n      if (workspace.currentSequence.type === 'footnote') {\n        workspace.footnoteNo++;\n      }\n      workspace.currentSequence = {};\n    }\n  }],\n  blockGraft: [{\n    description: \"Process block grafts\",\n    test: function test() {\n      return true;\n    },\n    action: function action(environment) {\n      var currentBlock = environment.context.sequences[0].block;\n      if (currentBlock.subType !== \"remark\" && !([\"title\", \"endTitle\"].includes(currentBlock.subType) && !environment.workspace.settings.showTitles) && !([\"heading\"].includes(currentBlock.subType) && !environment.workspace.settings.showHeadings) && !([\"introduction\"].includes(currentBlock.subType) && !environment.workspace.settings.showIntroductions)) {\n        var graftRecord = {\n          type: currentBlock.type\n        };\n        if (currentBlock.sequence) {\n          graftRecord.sequence = {};\n          var cachedSequencePointer = environment.workspace.currentSequence;\n          environment.workspace.currentSequence = graftRecord.sequence;\n          var cachedParaContentStack = environment.workspace.paraContentStack;\n          environment.context.renderer.renderSequence(environment);\n          environment.workspace.paraContentStack = cachedParaContentStack;\n          environment.workspace.currentSequence = cachedSequencePointer;\n        }\n        environment.workspace.currentSequence.blocks.push(graftRecord);\n      }\n    }\n  }],\n  inlineGraft: [{\n    description: \"identity\",\n    test: function test(_ref6) {\n      var context = _ref6.context,\n        workspace = _ref6.workspace;\n      return context.sequences[0].element.subType !== \"note_caller\" && !([\"footnote\"].includes(context.sequences[0].element.subType) && !workspace.settings.showFootnotes) && !([\"xref\"].includes(context.sequences[0].element.subType) && !workspace.settings.showXrefs);\n    },\n    action: function action(environment) {\n      if (context.inTable) {\n        context.inTable = false;\n        workspace.paraContentStack[0].content.push(\"</table>\");\n        workspace.webParas.push(workspace.paraContentStack[0].content.join(\" \"));\n      }\n      var element = environment.context.sequences[0].element;\n      var graftRecord = {\n        type: element.type\n      };\n      if (element.sequence) {\n        graftRecord.sequence = {};\n        var cachedSequencePointer = environment.workspace.currentSequence;\n        var cachedParaContentStack = _toConsumableArray(environment.workspace.paraContentStack);\n        var cachedWebParas = environment.workspace.webParas;\n        environment.workspace.webParas = [];\n        environment.workspace.currentSequence = graftRecord.sequence;\n        environment.context.renderer.renderSequence(environment);\n        var sequencePseudoParas = environment.workspace.webParas;\n        environment.workspace.webParas = cachedWebParas;\n        environment.workspace.paraContentStack = cachedParaContentStack;\n        environment.workspace.paraContentStack[0].content.push(sequencePseudoParas);\n        environment.workspace.currentSequence = cachedSequencePointer;\n      }\n    }\n  }],\n  startParagraph: [{\n    description: \"Initialise content stack\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref7) {\n      var config = _ref7.config,\n        context = _ref7.context,\n        workspace = _ref7.workspace;\n      if (context.inTable) {\n        context.inTable = false;\n        workspace.webParas.push(config.renderers.table(workspace.paraContentStack[0].content));\n      }\n      var block = context.sequences[0].block;\n      workspace.paraContentStack = [{\n        subType: block.subType,\n        content: []\n      }];\n    }\n  }],\n  endParagraph: [{\n    description: \"Add completed para to webParas\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref8) {\n      var config = _ref8.config,\n        context = _ref8.context,\n        workspace = _ref8.workspace;\n      workspace.webParas.push(config.renderers.paragraph(workspace.settings.showParaStyles || ['footnote', 'xref'].includes(context.sequences[0].type) ? workspace.paraContentStack[0].subType : \"usfm:m\", workspace.paraContentStack[0].content, workspace.footnoteNo));\n    }\n  }],\n  startWrapper: [{\n    description: \"Skip usfm:w outside main sequence\",\n    test: function test(_ref9) {\n      var context = _ref9.context;\n      return context.sequences[0].element.subType === \"usfm:w\" && context.sequences[0].type !== \"main\";\n    },\n    action: function action() {}\n  }, {\n    description: \"Handle standard w attributes\",\n    test: function test(_ref10) {\n      var context = _ref10.context;\n      return context.sequences[0].element.subType === \"usfm:w\";\n    },\n    action: function action(_ref11) {\n      var context = _ref11.context,\n        workspace = _ref11.workspace;\n      var atts = context.sequences[0].element.atts;\n      var standardAtts = {};\n      for (var _ref12 of Object.entries(atts)) {\n        var _ref13 = _slicedToArray(_ref12, 2);\n        var key = _ref13[0];\n        var value = _ref13[1];\n        if ([\"strong\", \"lemma\", \"gloss\"].includes(key)) {\n          standardAtts[key] = value;\n        }\n      }\n      workspace.paraContentStack.unshift({\n        atts: standardAtts,\n        content: []\n      });\n      return false;\n    }\n  }, {\n    description: \"Push to paraContent Stack\",\n    test: function test(_ref14) {\n      var context = _ref14.context,\n        workspace = _ref14.workspace;\n      return ![\"chapter\", \"verses\"].includes(context.sequences[0].element.subType) && workspace.settings.showCharacterMarkup;\n    },\n    action: function action(_ref15) {\n      var context = _ref15.context,\n        workspace = _ref15.workspace;\n      var pushed = {\n        subType: context.sequences[0].element.subType,\n        content: []\n      };\n      if (context.sequences[0].element.subType === 'cell') {\n        pushed.atts = context.sequences[0].element.atts;\n      }\n      ;\n      workspace.paraContentStack.unshift(pushed);\n    }\n  }],\n  endWrapper: [{\n    description: \"Skip usfm:w outside main sequence\",\n    test: function test(_ref16) {\n      var context = _ref16.context;\n      return context.sequences[0].element.subType === \"usfm:w\" && context.sequences[0].type !== \"main\";\n    },\n    action: function action() {}\n  }, {\n    description: \"Handle standard w attributes\",\n    test: function test(_ref17) {\n      var context = _ref17.context;\n      return context.sequences[0].element.subType === \"usfm:w\";\n    },\n    action: function action(_ref18) {\n      var config = _ref18.config,\n        workspace = _ref18.workspace;\n      var popped = workspace.paraContentStack.shift();\n      workspace.paraContentStack[0].content.push(config.renderers.wWrapper(workspace.settings.showWordAtts ? popped.atts : {}, popped.content));\n      return false;\n    }\n  }, {\n    description: \"Collapse one level of paraContent Stack\",\n    test: function test(_ref19) {\n      var context = _ref19.context,\n        workspace = _ref19.workspace;\n      return ![\"chapter\", \"verses\"].includes(context.sequences[0].element.subType) && workspace.settings.showCharacterMarkup;\n    },\n    action: function action(_ref20) {\n      var config = _ref20.config,\n        workspace = _ref20.workspace;\n      var popped = workspace.paraContentStack.shift();\n      workspace.paraContentStack[0].content.push(config.renderers.wrapper(popped.subType === 'cell' ? popped.atts : {}, popped.subType, popped.content));\n    }\n  }],\n  startMilestone: [{\n    description: \"Handle zaln word-like atts\",\n    test: function test(_ref21) {\n      var context = _ref21.context;\n      return context.sequences[0].element.subType === \"usfm:zaln\";\n    },\n    action: function action(_ref22) {\n      var context = _ref22.context,\n        workspace = _ref22.workspace;\n      var atts = context.sequences[0].element.atts;\n      var standardAtts = {};\n      for (var _ref23 of Object.entries(atts)) {\n        var _ref24 = _slicedToArray(_ref23, 2);\n        var key = _ref24[0];\n        var value = _ref24[1];\n        if ([\"x-strong\", \"x-lemma\", \"x-morph\", \"x-content\"].includes(key)) {\n          standardAtts[key.split('-')[1]] = value;\n        }\n      }\n      workspace.paraContentStack.unshift({\n        atts: standardAtts,\n        content: []\n      });\n      return false;\n    }\n  }],\n  endMilestone: [{\n    description: \"Handle zaln word-like atts\",\n    test: function test(_ref25) {\n      var context = _ref25.context;\n      return context.sequences[0].element.subType === \"usfm:zaln\";\n    },\n    action: function action(_ref26) {\n      var config = _ref26.config,\n        workspace = _ref26.workspace;\n      var popped = workspace.paraContentStack.shift();\n      workspace.paraContentStack[0].content.push(config.renderers.wWrapper(workspace.settings.showWordAtts ? popped.atts : {}, popped.content));\n      return false;\n    }\n  }],\n  text: [{\n    description: \"Push text to para\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref27) {\n      var config = _ref27.config,\n        context = _ref27.context,\n        workspace = _ref27.workspace;\n      var element = context.sequences[0].element;\n      element.text.split(\" \").map(function (w, id) {\n        var renderedText = config.renderers.text(id === element.text.split(\" \") - 1 ? w : w + \" \");\n        workspace.paraContentStack[0].content.push(renderedText);\n      });\n    }\n  }],\n  mark: [{\n    description: \"Show chapter/verse markers\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref28) {\n      var config = _ref28.config,\n        context = _ref28.context,\n        workspace = _ref28.workspace;\n      var element = context.sequences[0].element;\n      if (element.subType === \"chapter_label\" && workspace.settings.showChapterLabels) {\n        workspace.chapter = element.atts.number;\n        workspace.paraContentStack[0].content.push(config.renderers.chapter_label(element.atts.number));\n      } else if (element.subType === \"verses_label\" && workspace.settings.showVersesLabels) {\n        var bcv = [];\n        if (config.selectedBcvNotes.length > 0) {\n          bcv = [workspace.bookCode, workspace.chapter, element.atts.number];\n        }\n        workspace.paraContentStack[0].content.push(config.renderers.verses_label(element.atts.number, bcv, config.bcvNotesCallback));\n      }\n    }\n  }],\n  endDocument: [{\n    description: \"Build JSX\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref29) {\n      var config = _ref29.config,\n        workspace = _ref29.workspace,\n        output = _ref29.output;\n      output.paras = config.renderers.mergeParas(workspace.webParas);\n    }\n  }],\n  endChapter: [{\n    description: \"endChapter\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref30) {\n      var config = _ref30.config,\n        workspace = _ref30.workspace,\n        output = _ref30.output;\n    }\n  }],\n  endVerses: [{\n    description: \"end Verses\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref31) {\n      var config = _ref31.config,\n        workspace = _ref31.workspace,\n        output = _ref31.output;\n    }\n  }],\n  startChapter: [{\n    description: \"start Chapter\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref32) {\n      var config = _ref32.config,\n        workspace = _ref32.workspace,\n        output = _ref32.output;\n    }\n  }],\n  startVerses: [{\n    description: \"start Verses\",\n    test: function test() {\n      return true;\n    },\n    action: function action(_ref33) {\n      var config = _ref33.config,\n        workspace = _ref33.workspace,\n        output = _ref33.output;\n    }\n  }]\n};\nexport default sofria2WebActions;","map":{"version":3,"names":["defaultSettings","showWordAtts","showTitles","showHeadings","showFootnotes","showXrefs","showChapterLabels","showVersesLabels","showCharacterMarkup","showParaStyles","selectedBcvNotes","sofria2WebActions","startDocument","description","test","action","_ref","config","context","workspace","output","displayPartOfText","includes","state","Error","settings","_objectSpread","webParas","sofria","sequence","currentSequence","paraContentStack","footnoteNo","bookCode","document","metadata","chapter","startRow","_ref2","block","sequences","inTable","subType","content","unshift","endRow","_ref3","popped","shift","push","renderers","row","startSequence","_ref4","type","blocks","endSequence","_ref5","blockGraft","environment","currentBlock","showIntroductions","graftRecord","cachedSequencePointer","cachedParaContentStack","renderer","renderSequence","inlineGraft","_ref6","element","join","_toConsumableArray","cachedWebParas","sequencePseudoParas","startParagraph","_ref7","table","endParagraph","_ref8","paragraph","startWrapper","_ref9","_ref10","_ref11","atts","standardAtts","_ref12","Object","entries","_ref13","_slicedToArray","key","value","_ref14","_ref15","pushed","endWrapper","_ref16","_ref17","_ref18","wWrapper","_ref19","_ref20","wrapper","startMilestone","_ref21","_ref22","_ref23","_ref24","split","endMilestone","_ref25","_ref26","text","_ref27","map","w","id","renderedText","mark","_ref28","number","chapter_label","bcv","length","verses_label","bcvNotesCallback","endDocument","_ref29","paras","mergeParas","endChapter","_ref30","endVerses","_ref31","startChapter","_ref32","startVerses","_ref33"],"sources":["/home/gabriel/repos/jxt-korennumi/renderer/sofria2web.js"],"sourcesContent":["\nconst defaultSettings = {\n    showWordAtts: false,\n    showTitles: true,\n    showHeadings: true,\n    showFootnotes: true,\n    showXrefs: true,\n    showChapterLabels: true,\n    showVersesLabels: true,\n    showCharacterMarkup: true,\n    showParaStyles: true,\n    selectedBcvNotes: []\n}\n\nconst sofria2WebActions = {\n    startDocument: [\n        {\n            description: \"Set up\",\n            test: () => true,\n            action: ({ config, context, workspace, output }) => {\n                if (config.displayPartOfText != null) {\n                    if (!['begin', 'continue'].includes(config.displayPartOfText.state)) {\n\n                        throw new Error('state must be typeof string and one of begin or continue');\n                    }\n                }\n                workspace.settings = { ...defaultSettings, ...config }\n                workspace.webParas = [];\n                output.sofria = {};\n                output.sofria.sequence = {};\n                workspace.currentSequence = output.sofria.sequence;\n                workspace.paraContentStack = [];\n                workspace.footnoteNo = 1;\n                workspace.bookCode = context.document.metadata.document.bookCode;\n                workspace.chapter = 0;\n\n            },\n        }\n    ],\n    startRow: [\n        {\n            description: \"Initialise content stack\",\n            test: () => true,\n            action: ({ context, workspace }) => {\n                const block = context.sequences[0].block;\n\n                if (!context.inTable) {\n                    context.inTable = true\n\n                    workspace.paraContentStack = [\n                        {\n                            subType: 'table',\n                            content: []\n                        }\n\n                    ]\n                }\n                workspace.paraContentStack.unshift(\n                    {\n                        subType: block.subType,\n                        content: []\n                    }\n                );\n            }\n        },\n    ],\n\n    endRow: [\n        {\n            description: \"Add completed table to webParas\",\n            test: () => true,\n            action: ({ config, context, workspace }) => {\n\n                const popped = workspace.paraContentStack.shift();\n                workspace.paraContentStack[0].content.push(config.renderers.row(\n\n                    popped.content\n                ));\n            }\n        },\n    ],\n    startSequence: [\n        {\n            description: \"identity\",\n            test: () => true,\n            action: ({ context, workspace }) => {\n                if (context.inTable) {\n                    context.inTable = false\n                }\n                workspace.currentSequence.type = context.sequences[0].type;\n                workspace.currentSequence.blocks = [];\n            }\n        },\n    ],\n    endSequence: [\n        {\n            description: \"identity\",\n            test: () => true,\n            action: ({ workspace }) => {\n                if (workspace.currentSequence.type === 'footnote') {\n                    workspace.footnoteNo++;\n                }\n                workspace.currentSequence = {};\n            }\n        },\n    ],\n    blockGraft: [\n        {\n            description: \"Process block grafts\",\n            test: () => true,\n            action: (environment) => {\n                const currentBlock = environment.context.sequences[0].block;\n                if (\n                    currentBlock.subType !== \"remark\" &&\n                    !([\"title\", \"endTitle\"].includes(currentBlock.subType) && !environment.workspace.settings.showTitles) &&\n                    !([\"heading\"].includes(currentBlock.subType) && !environment.workspace.settings.showHeadings) &&\n                    !([\"introduction\"].includes(currentBlock.subType) && !environment.workspace.settings.showIntroductions)\n                ) {\n                    const graftRecord = {\n                        type: currentBlock.type,\n                    };\n                    if (currentBlock.sequence) {\n                        graftRecord.sequence = {};\n                        const cachedSequencePointer = environment.workspace.currentSequence;\n                        environment.workspace.currentSequence = graftRecord.sequence;\n                        const cachedParaContentStack = environment.workspace.paraContentStack;\n                        environment.context.renderer.renderSequence(environment);\n                        environment.workspace.paraContentStack = cachedParaContentStack;\n                        environment.workspace.currentSequence = cachedSequencePointer;\n                    }\n                    environment.workspace.currentSequence.blocks.push(graftRecord);\n                }\n            }\n        },\n    ],\n    inlineGraft: [\n        {\n            description: \"identity\",\n            test: ({ context, workspace }) => context.sequences[0].element.subType !== \"note_caller\" &&\n                !([\"footnote\"].includes(context.sequences[0].element.subType) && !workspace.settings.showFootnotes) &&\n                !([\"xref\"].includes(context.sequences[0].element.subType) && !workspace.settings.showXrefs),\n            action: (environment) => {\n                if (context.inTable) {\n                    context.inTable = false\n                    workspace.paraContentStack[0].content.push(`</table>`)\n                    workspace.webParas.push(workspace.paraContentStack[0].content.join(\" \"))\n                }\n                const element = environment.context.sequences[0].element;\n\n                const graftRecord = {\n                    type: element.type,\n                };\n\n                if (element.sequence) {\n                    graftRecord.sequence = {};\n                    const cachedSequencePointer = environment.workspace.currentSequence;\n                    const cachedParaContentStack = [...environment.workspace.paraContentStack];\n                    const cachedWebParas = environment.workspace.webParas;\n                    environment.workspace.webParas = [];\n                    environment.workspace.currentSequence = graftRecord.sequence;\n                    environment.context.renderer.renderSequence(environment);\n                    const sequencePseudoParas = environment.workspace.webParas;\n                    environment.workspace.webParas = cachedWebParas;\n                    environment.workspace.paraContentStack = cachedParaContentStack;\n                    environment.workspace.paraContentStack[0].content.push(sequencePseudoParas);\n                    environment.workspace.currentSequence = cachedSequencePointer;\n\n                }\n            }\n        },\n    ],\n    startParagraph: [\n        {\n            description: \"Initialise content stack\",\n            test: () => true,\n            action: ({ config, context, workspace }) => {\n                if (context.inTable) {\n                    context.inTable = false\n                    workspace.webParas.push(config.renderers.table(workspace.paraContentStack[0].content))\n\n                }\n                const block = context.sequences[0].block;\n                workspace.paraContentStack = [\n                    {\n                        subType: block.subType,\n                        content: []\n                    }\n                ]\n            }\n        },\n    ],\n    endParagraph: [\n        {\n            description: \"Add completed para to webParas\",\n            test: () => true,\n            action: ({ config, context, workspace }) => {\n                workspace.webParas.push(\n                    config.renderers.paragraph(\n                        workspace.settings.showParaStyles || ['footnote', 'xref'].includes(context.sequences[0].type) ?\n                            workspace.paraContentStack[0].subType :\n                            \"usfm:m\",\n                        workspace.paraContentStack[0].content,\n                        workspace.footnoteNo,\n                    )\n                );\n            }\n        },\n    ],\n    startWrapper: [\n        {\n            description: \"Skip usfm:w outside main sequence\",\n            test: ({ context }) => context.sequences[0].element.subType === \"usfm:w\" && context.sequences[0].type !== \"main\",\n            action: () => { }\n        },\n        {\n            description: \"Handle standard w attributes\",\n            test: ({ context }) => context.sequences[0].element.subType === \"usfm:w\",\n            action: ({ context, workspace }) => {\n                const atts = context.sequences[0].element.atts;\n                const standardAtts = {};\n                for (const [key, value] of Object.entries(atts)) {\n                    if ([\"strong\", \"lemma\", \"gloss\"].includes(key)) {\n                        standardAtts[key] = value;\n                    }\n                }\n                workspace.paraContentStack.unshift(\n                    {\n                        atts: standardAtts,\n                        content: []\n                    }\n                );\n                return false;\n            }\n        },\n        {\n            description: \"Push to paraContent Stack\",\n            test: ({ context, workspace }) => ![\"chapter\", \"verses\"].includes(context.sequences[0].element.subType) && workspace.settings.showCharacterMarkup,\n            action: ({ context, workspace }) => {\n                const pushed = {\n                    subType: context.sequences[0].element.subType,\n                    content: []\n                };\n                if (context.sequences[0].element.subType === 'cell') {\n                    pushed.atts = context.sequences[0].element.atts\n                };\n                workspace.paraContentStack.unshift(\n                    pushed\n                );\n            }\n        },\n    ],\n    endWrapper: [\n        {\n            description: \"Skip usfm:w outside main sequence\",\n            test: ({ context }) => context.sequences[0].element.subType === \"usfm:w\" && context.sequences[0].type !== \"main\",\n            action: () => { }\n        },\n        {\n            description: \"Handle standard w attributes\",\n            test: ({ context }) => context.sequences[0].element.subType === \"usfm:w\",\n            action: ({ config, workspace }) => {\n                const popped = workspace.paraContentStack.shift();\n                workspace.paraContentStack[0].content.push(config.renderers.wWrapper(\n                    (workspace.settings.showWordAtts ? popped.atts : {}),\n                    popped.content\n                ));\n                return false;\n            }\n        },\n        {\n            description: \"Collapse one level of paraContent Stack\",\n            test: ({ context, workspace }) => ![\"chapter\", \"verses\"].includes(context.sequences[0].element.subType) && workspace.settings.showCharacterMarkup,\n            action: ({ config, workspace }) => {\n                const popped = workspace.paraContentStack.shift();\n                workspace.paraContentStack[0].content.push(config.renderers.wrapper(popped.subType === 'cell' ? popped.atts : {}, popped.subType, popped.content));\n            }\n        },\n    ],\n    startMilestone: [\n        {\n            description: \"Handle zaln word-like atts\",\n            test: ({ context }) => context.sequences[0].element.subType === \"usfm:zaln\",\n            action: ({ context, workspace }) => {\n                const atts = context.sequences[0].element.atts;\n                const standardAtts = {};\n                for (const [key, value] of Object.entries(atts)) {\n                    if ([\"x-strong\", \"x-lemma\", \"x-morph\", \"x-content\"].includes(key)) {\n                        standardAtts[key.split('-')[1]] = value;\n                    }\n                }\n                workspace.paraContentStack.unshift(\n                    {\n                        atts: standardAtts,\n                        content: []\n                    }\n                );\n                return false;\n            }\n        },\n    ],\n    endMilestone: [\n        {\n            description: \"Handle zaln word-like atts\",\n            test: ({ context }) => context.sequences[0].element.subType === \"usfm:zaln\",\n            action: ({ config, workspace }) => {\n                const popped = workspace.paraContentStack.shift();\n                workspace.paraContentStack[0].content.push(config.renderers.wWrapper(\n                    (workspace.settings.showWordAtts ? popped.atts : {}),\n                    popped.content\n                ));\n                return false;\n            }\n        },\n    ],\n    text: [\n        {\n            description: \"Push text to para\",\n            test: () => true,\n            action: ({ config, context, workspace }) => {\n\n                const element = context.sequences[0].element;\n                //const renderedText = config.renderers.text(element.text);\n                //workspace.paraContentStack[0].content.push(renderedText);\n                element.text.split(\" \").map((w, id) => {\n\n                    const renderedText = config.renderers.text((id === element.text.split(\" \") - 1) ? w : w + \" \")\n                    workspace.paraContentStack[0].content.push(renderedText);\n                })\n\n            }\n        },\n    ],\n    mark: [\n        {\n            description: \"Show chapter/verse markers\",\n            test: () => true,\n            action: ({ config, context, workspace }) => {\n                const element = context.sequences[0].element;\n                if (element.subType === \"chapter_label\" && workspace.settings.showChapterLabels) {\n                    workspace.chapter = element.atts.number;\n                    workspace.paraContentStack[0].content.push(config.renderers.chapter_label(element.atts.number));\n                } else if (element.subType === \"verses_label\" && workspace.settings.showVersesLabels) {\n                    let bcv = [];\n                    if (config.selectedBcvNotes.length > 0) {\n                        bcv = [workspace.bookCode, workspace.chapter, element.atts.number]\n                    }\n                    workspace.paraContentStack[0].content.push(config.renderers.verses_label(element.atts.number, bcv, config.bcvNotesCallback));\n                }\n            }\n        },\n    ],\n    endDocument: [\n        {\n            description: \"Build JSX\",\n            test: () => true,\n            action: ({ config, workspace, output }) => {\n                output.paras = config.renderers.mergeParas(workspace.webParas);\n            }\n        }\n    ],\n    endChapter: [\n        {\n            description: \"endChapter\",\n            test: () => true,\n            action: ({ config, workspace, output }) => {\n\n            }\n        }\n    ],\n    endVerses: [\n        {\n            description: \"end Verses\",\n            test: () => true,\n            action: ({ config, workspace, output }) => {\n\n            }\n        }\n    ],\n    startChapter: [\n        {\n            description: \"start Chapter\",\n            test: () => true,\n            action: ({ config, workspace, output }) => {\n\n            }\n        }\n    ],\n    startVerses: [\n        {\n            description: \"start Verses\",\n            test: () => true,\n            action: ({ config, workspace, output }) => {\n\n            }\n        }\n    ],\n};\n\nexport default sofria2WebActions;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}