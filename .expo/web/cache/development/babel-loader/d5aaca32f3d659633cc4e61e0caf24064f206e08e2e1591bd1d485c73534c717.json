{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useState, useRef, useReducer } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { Checkbox } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction ChapitreSelection(_ref) {\n  var pk = _ref.pk,\n    bible = _ref.bible,\n    livre = _ref.livre,\n    chapitre = _ref.chapitre,\n    setChapitre = _ref.setChapitre;\n  console.log('renderchapitreSelection');\n  var firstRender = useRef(true);\n  var _useReducer = useReducer(checkboxesReducer, {}),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    checkboxes = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  if (livre === 'null' || bible == 'null') {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n  var chapters = pk.gqlQuerySync(\"{\\n        docSet(id: \\\"\" + bible + \"\\\") {\\n          document(bookCode: \\\"\" + livre + \"\\\") {\\n            cvIndexes {\\n              chapter\\n            }\\n          }\\n        }\\n      }\");\n  var checkboxesReducer = function checkboxesReducer(state, action) {\n    switch (action.type) {\n      case 'toggle':\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, !state[action.id]));\n      default:\n        throw new Error();\n    }\n  };\n  var toggleCheckbox = function toggleCheckbox(id) {\n    return dispatch({\n      type: 'toggle',\n      id: id\n    });\n  };\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item;\n    return item;\n  }, []);\n  var keyExtractor = useCallback(function (item, index) {\n    return \"chap-\" + index;\n  }, []);\n  if (chapters.data.docSet.document != null) {\n    var data = [];\n    chapters.data.docSet.document.cvIndexes.map(function (doc, id) {\n      data.push(_jsxs(View, {\n        style: {\n          flexDirection: 'column',\n          width: 50\n        },\n        children: [_jsx(Text, {\n          style: {\n            alignSelf: 'center'\n          },\n          children: doc.chapters\n        }), _jsx(View, {\n          style: {\n            alignSelf: 'center'\n          },\n          children: _jsx(Checkbox, {\n            status: checkboxes[id] ? 'checked' : 'unchecked',\n            onPress: function onPress() {\n              return toggleCheckbox(id);\n            }\n          }, id)\n        })]\n      }));\n    });\n    return _jsx(FlatList, {\n      data: data,\n      numColumns: 3,\n      keyExtractor: keyExtractor,\n      renderItem: renderItem\n    });\n  } else {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n}\nexport { ChapitreSelection };","map":{"version":3,"names":["Text","useCallback","useEffect","useState","useRef","useReducer","View","FlatList","Checkbox","jsx","_jsx","jsxs","_jsxs","ChapitreSelection","_ref","pk","bible","livre","chapitre","setChapitre","console","log","firstRender","_useReducer","checkboxesReducer","_useReducer2","_slicedToArray","checkboxes","dispatch","children","chapters","gqlQuerySync","state","action","type","_objectSpread","_defineProperty","id","Error","toggleCheckbox","renderItem","_ref2","item","keyExtractor","index","data","docSet","document","cvIndexes","map","doc","push","style","flexDirection","width","alignSelf","status","onPress","numColumns"],"sources":["/home/gabriel/repos/jxt-korennumi/components/proofOfConcept/ChapitreSelection.js"],"sourcesContent":["import { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useState, useRef,useReducer } from 'react';\n\nimport { View, FlatList } from 'react-native';\nimport { Checkbox } from 'react-native-paper';\n\nfunction ChapitreSelection({ pk, bible, livre, chapitre, setChapitre }) {\n  console.log('renderchapitreSelection')\n  let firstRender = useRef(true);\n  const [checkboxes, dispatch] = useReducer(checkboxesReducer, {});\n\n  if (livre === 'null' || bible == 'null') {\n    return <Text>{`Can't display`}</Text>\n  }\n  let chapters = pk.gqlQuerySync(\n    `{\n        docSet(id: \"${bible}\") {\n          document(bookCode: \"${livre}\") {\n            cvIndexes {\n              chapter\n            }\n          }\n        }\n      }`);\n\n\n\n  const checkboxesReducer = (state, action) => {\n    switch (action.type) {\n      case 'toggle':\n        return { ...state, [action.id]: !state[action.id] };\n      default:\n        throw new Error();\n    }\n  };\n  const toggleCheckbox = (id) => dispatch({ type: 'toggle', id });\n\n  const renderItem = useCallback(({ item }) => item, []);\n  const keyExtractor = useCallback((item, index) => `chap-${index}`, []);\n\n\n\n\n  if (chapters.data.docSet.document != null) {\n    let data = []\n    chapters.data.docSet.document.cvIndexes.map((doc, id) => {\n      data.push(\n        <View style={{ flexDirection: 'column', width: 50 }}>\n          <Text style={{ alignSelf: 'center' }}>{doc.chapters}</Text>\n          <View style={{ alignSelf: 'center' }}>\n            <Checkbox\n              key={id}\n              status={checkboxes[id] ? 'checked' : 'unchecked'}\n              onPress={() => toggleCheckbox(id)}\n            />\n          </View>\n        </View>)\n    })\n    return <FlatList\n      data={data}\n      numColumns={3}\n      keyExtractor={keyExtractor}\n      renderItem={renderItem} />\n  } else {\n    return <Text>{`Can't display`}</Text>\n  }\n}\nexport { ChapitreSelection }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}