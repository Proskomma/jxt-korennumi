{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useState, useRef, useReducer } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { Checkbox } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var checkboxesReducer = function checkboxesReducer(state, action) {\n  switch (action.type) {\n    case 'toggle':\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, !state[action.id]));\n    default:\n      throw new Error();\n  }\n};\nfunction ChapitreSelection(_ref) {\n  var pk = _ref.pk,\n    bible = _ref.bible,\n    livre = _ref.livre,\n    dispatch = _ref.dispatch,\n    checkboxes = _ref.checkboxes;\n  var toggleCheckbox = useCallback(function (id) {\n    return dispatch({\n      type: 'toggle',\n      id: id\n    });\n  }, [dispatch]);\n  if (livre === 'null' || bible == 'null') {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n  var chapters = useRef(pk.gqlQuerySync(\"{\\n        docSet(id: \\\"\" + bible + \"\\\") {\\n          document(bookCode: \\\"\" + livre + \"\\\") {\\n            cvIndexes {\\n              chapter\\n            }\\n          }\\n        }\\n      }\"));\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item;\n    var id = item.id,\n      num = item.num;\n    return _jsxs(View, {\n      style: styles.checkboxContainer,\n      children: [_jsx(Text, {\n        style: styles.centeredText,\n        children: num\n      }), _jsx(View, {\n        style: styles.centeredCheckbox,\n        children: _jsx(Checkbox, {\n          status: checkboxes[id] ? 'checked' : 'unchecked',\n          onPress: function onPress() {\n            return toggleCheckbox(id);\n          }\n        }, id)\n      })]\n    });\n  }, [toggleCheckbox, checkboxes]);\n  var keyExtractor = useCallback(function (item) {\n    return \"chap-\" + item.id;\n  }, []);\n  var data = chapters.current.data.docSet.document.cvIndexes.map(function (doc, id) {\n    return {\n      id: id,\n      num: doc.chapter\n    };\n  });\n  if (data.length > 0) {\n    return _jsx(FlatList, {\n      data: data,\n      numColumns: 3,\n      keyExtractor: keyExtractor,\n      renderItem: renderItem\n    });\n  } else {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n}\nvar styles = StyleSheet.create({\n  checkboxContainer: {\n    flexDirection: 'column',\n    width: 50\n  },\n  centeredText: {\n    alignSelf: 'center'\n  },\n  centeredCheckbox: {\n    alignSelf: 'center'\n  }\n});\nexport { ChapitreSelection };","map":{"version":3,"names":["Text","useCallback","useEffect","useState","useRef","useReducer","View","FlatList","StyleSheet","Checkbox","jsx","_jsx","jsxs","_jsxs","checkboxesReducer","state","action","type","_objectSpread","_defineProperty","id","Error","ChapitreSelection","_ref","pk","bible","livre","dispatch","checkboxes","toggleCheckbox","children","chapters","gqlQuerySync","renderItem","_ref2","item","num","style","styles","checkboxContainer","centeredText","centeredCheckbox","status","onPress","keyExtractor","data","current","docSet","document","cvIndexes","map","doc","chapter","length","numColumns","create","flexDirection","width","alignSelf"],"sources":["/home/gabriel/repos/jxt-korennumi/components/proofOfConcept/ChapitreSelection.js"],"sourcesContent":["import { Text } from 'react-native-paper';\nimport { useCallback, useEffect, useState, useRef, useReducer } from 'react';\nimport { View, FlatList, StyleSheet } from 'react-native';\nimport { Checkbox } from 'react-native-paper';\n\nexport const checkboxesReducer = (state, action) => {\n  switch (action.type) {\n    case 'toggle':\n      return { ...state, [action.id]: !state[action.id] };\n    default:\n      throw new Error();\n  }\n};\n\nfunction ChapitreSelection({ pk, bible, livre, dispatch, checkboxes }) {\n  const toggleCheckbox = useCallback((id) => dispatch({ type: 'toggle', id }), [dispatch]);\n\n  if (livre === 'null' || bible == 'null') {\n    return <Text>{`Can't display`}</Text>\n  }\n\n  let chapters = useRef(pk.gqlQuerySync(\n    `{\n        docSet(id: \"${bible}\") {\n          document(bookCode: \"${livre}\") {\n            cvIndexes {\n              chapter\n            }\n          }\n        }\n      }`\n  ));\n\n  const renderItem = useCallback(\n    ({ item }) => {\n      const { id, num } = item;\n      return (\n        <View style={styles.checkboxContainer}>\n          <Text style={styles.centeredText}>{num}</Text>\n          <View style={styles.centeredCheckbox}>\n            <Checkbox\n              key={id}\n              status={checkboxes[id] ? 'checked' : 'unchecked'}\n              onPress={() => toggleCheckbox(id)}\n            />\n          </View>\n        </View>\n      );\n    },\n    [toggleCheckbox, checkboxes]\n  );\n\n  const keyExtractor = useCallback((item) => `chap-${item.id}`, []);\n\n  const data = chapters.current.data.docSet.document.cvIndexes.map((doc, id) => ({\n    id,\n    num: doc.chapter,\n  }));\n\n  if (data.length > 0) {\n    return (\n      <FlatList\n        data={data}\n        numColumns={3}\n        keyExtractor={keyExtractor}\n        renderItem={renderItem}\n      />\n    );\n  } else {\n    return <Text>{`Can't display`}</Text>\n  }\n}\n\nconst styles = StyleSheet.create({\n  checkboxContainer: { flexDirection: 'column', width: 50 },\n  centeredText: { alignSelf: 'center' },\n  centeredCheckbox: { alignSelf: 'center' },\n});\n\nexport { ChapitreSelection }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}