{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useCallback, useEffect } from 'react';\nfunction useDocumentQuery(livre, bible, pk) {\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    documentResult = _useState2[0],\n    setDocumentResult = _useState2[1];\n  useEffect(function () {\n    var documentQuery = \"\\n      {\\n        document(docSetId: \\\"\" + bible + \"\\\" withBook: \\\"\" + livre + \"\\\"){\\n          id\\n          cIndexes {\\n            chapter\\n          }\\n      }}\\n      \";\n    var documentResult = pk.gqlQuerySync(documentQuery);\n    setDocumentResult(documentResult);\n  }, [livre, bible]);\n  return documentResult;\n}\nfunction useRenderDocument(documentResult, pk, renderers, SofriaRenderFromProskomma, sofria2WebActions, setData) {\n  var _useState3 = useState({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    output = _useState4[0],\n    setOutput = _useState4[1];\n  useEffect(function () {\n    if (documentResult) {\n      var renderer = new SofriaRenderFromProskomma({\n        proskomma: pk,\n        actions: sofria2WebActions\n      });\n      console.log(renderer);\n      var state = 'begin';\n      var config = {\n        showWordAtts: false,\n        showTitles: true,\n        showHeadings: true,\n        showIntroductions: true,\n        showFootnotes: true,\n        showXrefs: true,\n        showParaStyles: true,\n        showCharacterMarkup: true,\n        showChapterLabels: true,\n        showVersesLabels: true,\n        selectedBcvNotes: [],\n        displayPartOfText: {\n          state: state\n        },\n        bcvNotesCallback: function bcvNotesCallback(bcv) {\n          setBcvNoteRef(bcv);\n        },\n        renderers: renderers\n      };\n      console.time();\n      try {\n        renderer.renderDocument({\n          docId: documentResult.data.document.id,\n          config: config,\n          output: output\n        });\n      } catch (err) {\n        console.log(\"Renderer\", err);\n        throw err;\n      }\n      console.timeEnd();\n      setData(output.slice(0, 5));\n    }\n  }, [documentResult]);\n  return output;\n}\nexport { useDocumentQuery, useRenderDocument };","map":{"version":3,"names":["React","useState","useCallback","useEffect","useDocumentQuery","livre","bible","pk","_useState","_useState2","_slicedToArray","documentResult","setDocumentResult","documentQuery","gqlQuerySync","useRenderDocument","renderers","SofriaRenderFromProskomma","sofria2WebActions","setData","_useState3","_useState4","output","setOutput","renderer","proskomma","actions","console","log","state","config","showWordAtts","showTitles","showHeadings","showIntroductions","showFootnotes","showXrefs","showParaStyles","showCharacterMarkup","showChapterLabels","showVersesLabels","selectedBcvNotes","displayPartOfText","bcvNotesCallback","bcv","setBcvNoteRef","time","renderDocument","docId","data","document","id","err","timeEnd","slice"],"sources":["/home/gabriel/repos/jxt-korennumi/customHooks/RendererHooks.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\n\n\nfunction useDocumentQuery(livre, bible, pk) {\n    const [documentResult, setDocumentResult] = useState(null)\n    useEffect(() => {\n        let documentQuery = `\n      {\n        document(docSetId: \"${bible}\" withBook: \"${livre}\"){\n          id\n          cIndexes {\n            chapter\n          }\n      }}\n      `\n        const documentResult = pk.gqlQuerySync(documentQuery)\n        setDocumentResult(documentResult)\n    }, [livre, bible])\n    return documentResult\n}\n\nfunction useRenderDocument(documentResult, pk, renderers, SofriaRenderFromProskomma, sofria2WebActions, setData) {\n    const [output, setOutput] = useState({})\n    useEffect(() => {\n        if (documentResult) {\n\n            const renderer = new SofriaRenderFromProskomma({\n                proskomma: pk,\n                actions: sofria2WebActions,\n\n            });\n            console.log(renderer)\n            const state = 'begin';\n            const config = {\n\n                showWordAtts: false,\n                showTitles: true,\n                showHeadings: true,\n                showIntroductions: true,\n                showFootnotes: true,\n                showXrefs: true,\n                showParaStyles: true,\n                showCharacterMarkup: true,\n                showChapterLabels: true,\n                showVersesLabels: true,\n                selectedBcvNotes: [],\n                displayPartOfText: { state },\n                bcvNotesCallback: (bcv) => {\n                    setBcvNoteRef(bcv);\n                },\n                renderers,\n            };\n\n            console.time()\n            try {\n\n                renderer.renderDocument({\n                    docId: documentResult.data.document.id,\n                    config,\n                    output,\n                });\n\n            } catch (err) {\n                console.log(\"Renderer\", err);\n                throw err;\n            }\n            console.timeEnd()\n            setData(output.slice(0, 5))\n        }\n    }, [documentResult])\n    return output\n}\nexport { useDocumentQuery, useRenderDocument }"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAG/D,SAASC,gBAAgBA,CAACC,KAAK,EAAEC,KAAK,EAAEC,EAAE,EAAE;EACxC,IAAAC,SAAA,GAA4CP,QAAQ,CAAC,IAAI,CAAC;IAAAQ,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAnDG,cAAc,GAAAF,UAAA;IAAEG,iBAAiB,GAAAH,UAAA;EACxCN,SAAS,CAAC,YAAM;IACZ,IAAIU,aAAa,gDAEKP,KAAK,uBAAgBD,KAAK,iGAMjD;IACC,IAAMM,cAAc,GAAGJ,EAAE,CAACO,YAAY,CAACD,aAAa,CAAC;IACrDD,iBAAiB,CAACD,cAAc,CAAC;EACrC,CAAC,EAAE,CAACN,KAAK,EAAEC,KAAK,CAAC,CAAC;EAClB,OAAOK,cAAc;AACzB;AAEA,SAASI,iBAAiBA,CAACJ,cAAc,EAAEJ,EAAE,EAAES,SAAS,EAAEC,yBAAyB,EAAEC,iBAAiB,EAAEC,OAAO,EAAE;EAC7G,IAAAC,UAAA,GAA4BnB,QAAQ,CAAC,CAAC,CAAC,CAAC;IAAAoB,UAAA,GAAAX,cAAA,CAAAU,UAAA;IAAjCE,MAAM,GAAAD,UAAA;IAAEE,SAAS,GAAAF,UAAA;EACxBlB,SAAS,CAAC,YAAM;IACZ,IAAIQ,cAAc,EAAE;MAEhB,IAAMa,QAAQ,GAAG,IAAIP,yBAAyB,CAAC;QAC3CQ,SAAS,EAAElB,EAAE;QACbmB,OAAO,EAAER;MAEb,CAAC,CAAC;MACFS,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;MACrB,IAAMK,KAAK,GAAG,OAAO;MACrB,IAAMC,MAAM,GAAG;QAEXC,YAAY,EAAE,KAAK;QACnBC,UAAU,EAAE,IAAI;QAChBC,YAAY,EAAE,IAAI;QAClBC,iBAAiB,EAAE,IAAI;QACvBC,aAAa,EAAE,IAAI;QACnBC,SAAS,EAAE,IAAI;QACfC,cAAc,EAAE,IAAI;QACpBC,mBAAmB,EAAE,IAAI;QACzBC,iBAAiB,EAAE,IAAI;QACvBC,gBAAgB,EAAE,IAAI;QACtBC,gBAAgB,EAAE,EAAE;QACpBC,iBAAiB,EAAE;UAAEb,KAAK,EAALA;QAAM,CAAC;QAC5Bc,gBAAgB,EAAE,SAAAA,iBAACC,GAAG,EAAK;UACvBC,aAAa,CAACD,GAAG,CAAC;QACtB,CAAC;QACD5B,SAAS,EAATA;MACJ,CAAC;MAEDW,OAAO,CAACmB,IAAI,EAAE;MACd,IAAI;QAEAtB,QAAQ,CAACuB,cAAc,CAAC;UACpBC,KAAK,EAAErC,cAAc,CAACsC,IAAI,CAACC,QAAQ,CAACC,EAAE;UACtCrB,MAAM,EAANA,MAAM;UACNR,MAAM,EAANA;QACJ,CAAC,CAAC;MAEN,CAAC,CAAC,OAAO8B,GAAG,EAAE;QACVzB,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEwB,GAAG,CAAC;QAC5B,MAAMA,GAAG;MACb;MACAzB,OAAO,CAAC0B,OAAO,EAAE;MACjBlC,OAAO,CAACG,MAAM,CAACgC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC/B;EACJ,CAAC,EAAE,CAAC3C,cAAc,CAAC,CAAC;EACpB,OAAOW,MAAM;AACjB;AACA,SAASlB,gBAAgB,EAAEW,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}