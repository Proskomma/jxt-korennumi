{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { Text, Checkbox } from 'react-native-paper';\nimport { useCallback, useEffect, useState, useReducer } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faCheckSquare } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nlibrary.add(faCheckSquare);\nexport var checkboxesReducer = function checkboxesReducer(state, action) {\n  switch (action.type) {\n    case 'toggle':\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, !state[action.id]));\n    default:\n      throw new Error();\n  }\n};\nfunction ChapitreSelection(_ref) {\n  var _chapters$data, _chapters$data$docSet, _chapters$data$docSet2;\n  var pk = _ref.pk,\n    bible = _ref.bible,\n    livre = _ref.livre,\n    chapitre = _ref.chapitre,\n    setChapitre = _ref.setChapitre;\n  if (bible === 'null' || livre === 'null') {\n    return _jsx(Text, {\n      children: \"can't render\"\n    });\n  }\n  var _useReducer = useReducer(checkboxesReducer, chapitre.reduce(function (acc, id) {\n      return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, id, true));\n    }, {})),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    checkboxes = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var toggleCheckbox = useCallback(function (id) {\n    dispatch({\n      type: 'toggle',\n      id: id\n    });\n    if (checkboxes[id]) {\n      setChapitre(chapitre.filter(function (item) {\n        return item !== id;\n      }));\n    } else {\n      setChapitre([].concat(_toConsumableArray(chapitre), [id]));\n    }\n  }, [dispatch, checkboxes, chapitre]);\n  var chapters = pk.gqlQuerySync(\"{\\n        docSet(id: \\\"\" + bible + \"\\\") {\\n          document(bookCode: \\\"\" + livre + \"\\\") {\\n            cvIndexes {\\n              chapter\\n            }\\n          }\\n        }\\n      }\");\n  var _useState = useState(chapters == null ? void 0 : (_chapters$data = chapters.data) == null ? void 0 : (_chapters$data$docSet = _chapters$data.docSet.document) == null ? void 0 : (_chapters$data$docSet2 = _chapters$data$docSet.cvIndexes) == null ? void 0 : _chapters$data$docSet2.map(function (doc, id) {\n      return {\n        id: (id + 1).toString(),\n        num: doc.chapter\n      };\n    })),\n    _useState2 = _slicedToArray(_useState, 2),\n    data = _useState2[0],\n    setData = _useState2[1];\n  useEffect(function () {\n    var _chapters$data2, _chapters$data2$docSe, _chapters$data2$docSe2;\n    setData(chapters == null ? void 0 : (_chapters$data2 = chapters.data) == null ? void 0 : (_chapters$data2$docSe = _chapters$data2.docSet.document) == null ? void 0 : (_chapters$data2$docSe2 = _chapters$data2$docSe.cvIndexes) == null ? void 0 : _chapters$data2$docSe2.map(function (doc, id) {\n      return {\n        id: (id + 1).toString(),\n        num: doc.chapter\n      };\n    }));\n  }, [checkboxes]);\n  var renderItem = useCallback(function (_ref2) {\n    var item = _ref2.item;\n    var id = item.id,\n      num = item.num;\n    return _jsxs(View, {\n      style: styles.checkboxContainer,\n      children: [_jsx(Text, {\n        style: styles.centeredText,\n        children: num\n      }), _jsx(View, {\n        style: styles.centeredCheckbox,\n        children: _jsx(TouchableOpacity, {\n          style: {\n            borderWidth: 2,\n            width: 24,\n            height: 24\n          },\n          onPress: function onPress() {\n            return toggleCheckbox(id);\n          },\n          children: checkboxes[id] ? _jsx(View, {\n            children: _jsx(FontAwesomeIcon, {\n              icon: faCheckSquare,\n              size: 20,\n              color: \"blue\"\n            })\n          }) : _jsx(_Fragment, {})\n        })\n      })]\n    });\n  }, [toggleCheckbox, checkboxes]);\n  var keyExtractor = useCallback(function (item) {\n    return \"chap-\" + item.id;\n  }, []);\n  if (data.length > 0) {\n    return _jsx(FlatList, {\n      data: data,\n      numColumns: 3,\n      keyExtractor: keyExtractor,\n      renderItem: renderItem\n    });\n  } else {\n    return _jsx(Text, {\n      children: \"Can't display\"\n    });\n  }\n}\nvar styles = StyleSheet.create({\n  checkboxContainer: {\n    flexDirection: 'column',\n    width: 50\n  },\n  centeredText: {\n    alignSelf: 'center'\n  },\n  centeredCheckbox: {\n    alignSelf: 'center'\n  }\n});\nexport { ChapitreSelection };","map":{"version":3,"names":["Text","Checkbox","useCallback","useEffect","useState","useReducer","View","FlatList","StyleSheet","library","faCheckSquare","FontAwesomeIcon","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","add","checkboxesReducer","state","action","type","_objectSpread","_defineProperty","id","Error","ChapitreSelection","_ref","_chapters$data","_chapters$data$docSet","_chapters$data$docSet2","pk","bible","livre","chapitre","setChapitre","children","_useReducer","reduce","acc","_useReducer2","_slicedToArray","checkboxes","dispatch","toggleCheckbox","filter","item","concat","_toConsumableArray","chapters","gqlQuerySync","_useState","data","docSet","document","cvIndexes","map","doc","toString","num","chapter","_useState2","setData","_chapters$data2","_chapters$data2$docSe","_chapters$data2$docSe2","renderItem","_ref2","style","styles","checkboxContainer","centeredText","centeredCheckbox","TouchableOpacity","borderWidth","width","height","onPress","icon","size","color","keyExtractor","length","numColumns","create","flexDirection","alignSelf"],"sources":["/home/gabriel/repos/jxt-korennumi/components/used/TextConfig/ChapitreSelection.js"],"sourcesContent":["import { Text, Checkbox } from 'react-native-paper';\nimport { useCallback, useEffect, useState, useReducer } from 'react';\nimport { View, FlatList, StyleSheet } from 'react-native';\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { faCheckSquare } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-native-fontawesome';\n\nlibrary.add(faCheckSquare);\nexport const checkboxesReducer = (state, action) => {\n  switch (action.type) {\n    case 'toggle':\n      return { ...state, [action.id]: !state[action.id] };\n    default:\n      throw new Error();\n  }\n};\n\nfunction ChapitreSelection({ pk, bible, livre, chapitre, setChapitre }) {\n  if (bible === 'null' || livre === 'null') {\n\n    return <Text>can't render</Text>\n  }\n  const [checkboxes, dispatch] = useReducer(checkboxesReducer, chapitre.reduce((acc, id) => ({ ...acc, [id]: true }), {}));\n\n  const toggleCheckbox = useCallback((id) => {\n    dispatch({ type: 'toggle', id })\n    if (checkboxes[id]) {\n      setChapitre(chapitre.filter(item => item !== id));\n    } else {\n      setChapitre([...chapitre, id]);\n    }\n  }, [dispatch, checkboxes, chapitre]);\n\n  let chapters = pk.gqlQuerySync(\n    `{\n        docSet(id: \"${bible}\") {\n          document(bookCode: \"${livre}\") {\n            cvIndexes {\n              chapter\n            }\n          }\n        }\n      }`\n  );\n  const [data, setData] = useState(chapters?.data?.docSet.document?.cvIndexes?.map((doc, id) => ({\n    id: (id + 1).toString(), // start IDs from 1\n    num: doc.chapter,\n  })));\n\n  useEffect(() => {\n    setData(chapters?.data?.docSet.document?.cvIndexes?.map((doc, id) => ({\n      id: (id + 1).toString(), // start IDs from 1\n      num: doc.chapter,\n    })));\n  }, [checkboxes]);\n\n  const renderItem = useCallback(\n    ({ item }) => {\n      const { id, num } = item;\n      return (\n        <View style={styles.checkboxContainer}>\n          <Text style={styles.centeredText}>{num}</Text>\n          <View style={styles.centeredCheckbox}>\n            <TouchableOpacity style={{ borderWidth: 2, width: 24, height: 24, }} onPress={() => toggleCheckbox(id)}>\n              {checkboxes[id] ? <View><FontAwesomeIcon icon={faCheckSquare} size={20} color=\"blue\" /></View>\n                : <></>}\n            </TouchableOpacity>\n          </View>\n        </View>\n      );\n    },\n    [toggleCheckbox, checkboxes]\n  );\n\n  const keyExtractor = useCallback((item) => `chap-${item.id}`, []);\n\n  if (data.length > 0) {\n    return (\n      <FlatList\n        data={data}\n        numColumns={3}\n        keyExtractor={keyExtractor}\n        renderItem={renderItem}\n      />\n    );\n  } else {\n    return <Text>{`Can't display`}</Text>\n  }\n}\n\nconst styles = StyleSheet.create({\n  checkboxContainer: { flexDirection: 'column', width: 50 },\n  centeredText: { alignSelf: 'center' },\n  centeredCheckbox: { alignSelf: 'center' },\n});\n\nexport { ChapitreSelection }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}